# Fragments for reusable fields
fragment PoolFields on Pool {
  betsCloseAt
  createdAt
  id
  imageUrl
  isDraw
  options
  originalTruthSocialPostId
  question
  status
  usdcBetTotals
  winningOption
  pointsBetTotals
}

fragment BetFields on Bet {
  amount
  betIntId
  createdAt
  id
  isPayedOut
  optionIndex
  outcome
  poolIntId
  tokenType
  txHash
  userAddress
}

fragment BetWithdrawalFields on BetWithdrawal {
  id
  betId
  user
  amount
  tokenType
  blockNumber
  blockTimestamp
  transactionHash
  chainName
  chainId
}

# Queries
query GetPools(
  $filter: Pool_filter!
  $orderBy: Pool_orderBy!
  $orderDirection: OrderDirection!
  $first: Int
  $skip: Int
) {
  pools(
    where: $filter
    orderBy: $orderBy
    orderDirection: $orderDirection
    first: $first
    skip: $skip
  ) {
    ...PoolFields
  }
}

query GetPool($poolId: ID!) {
  pool(id: $poolId) {
    ...PoolFields
  }
}

query GetBets(
  $first: Int = 10
  $filter: Bet_filter!
  $orderBy: Bet_orderBy!
  $orderDirection: OrderDirection!
  $skip: Int = 0
) {
  bets(
    first: $first
    where: $filter
    orderBy: $orderBy
    orderDirection: $orderDirection
    skip: $skip
  ) {
    ...BetFields
    pool {
      ...PoolFields
    }
  }
}

query GetBetPlaced(
  $first: Int = 10
  $filter: BetPlaced_filter!
  $orderBy: BetPlaced_orderBy!
  $orderDirection: OrderDirection!
  $skip: Int = 0
) {
  betPlaceds(
    first: $first
    where: $filter
    orderBy: $orderBy
    orderDirection: $orderDirection
    skip: $skip
  ) {
    id
    betId
    poolId
    user
    option
    optionIndex
    amount
    tokenType
    blockNumber
    blockTimestamp
    transactionHash
    chainName
    chainId
    bet {
      ...BetFields
      pool {
        ...PoolFields
      }
    }
    pool {
      ...PoolFields
    }
  }
}

query GetPayoutClaimed(
  $first: Int = 100
  $skip: Int = 0
  $orderBy: PayoutClaimed_orderBy = blockTimestamp
  $orderDirection: OrderDirection = desc
  $where: PayoutClaimed_filter
) {
  payoutClaimeds(
    first: $first
    skip: $skip
    orderBy: $orderBy
    orderDirection: $orderDirection
    where: $where
  ) {
    id
    betId
    poolId
    user
    amount
    tokenType
    blockNumber
    blockTimestamp
    transactionHash
    chainName
    chainId
    bet {
      ...BetFields
      pool {
        ...PoolFields
      }
    }
    pool {
      ...PoolFields
    }
  }
}

# TODO Query is obsolete, needs to be updated, commented so it doesn't block codegen
# query GetBetWithdrawals(
#   $first: Int = 100
#   $skip: Int = 0
#   $orderBy: BetWithdrawal_orderBy = blockTimestamp
#   $orderDirection: OrderDirection = desc
#   $where: BetWithdrawal_filter
# ) {
#   betWithdrawals(
#     first: $first
#     skip: $skip
#     orderBy: $orderBy
#     orderDirection: $orderDirection
#     where: $where
#   ) {
#     ...BetWithdrawalFields
#   }
# }
